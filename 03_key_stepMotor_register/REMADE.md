<!--
 * @Descripttion: 
 * @Author: JaRyon
 * @version: 
 * @Date: 2025-09-18 14:02:04
-->
# STM32F103C8T6 按键控制步进电机

## 一、项目概述
基于STM32F103C8T6微控制器，实现通过按键控制28BYJ-48步进电机的转动。

**核心功能：**
- 初始状态：电机停在0度位置
- 按键功能：每按一次，电机**转动90度**
- 循环逻辑：正转一周(0→90→180→270→360)后，自动反向，再反转一周(360→270→180→90→0)，如此循环往复

## 二、硬件平台
- **主控芯片**：STM32F103C8T6
- **执行机构**：28BYJ-48 5线4相步进电机
- **驱动模块**：ULN2003驱动板
- **输入设备**：轻触按键
- **烧录工具**：ST-Link V2

## 三、开发环境
- **主开发IDE**：Keil MDK (用于工程编译、烧录配置)
- **辅助编辑器**：VSCode (用于高效代码编辑)
- **开发语言**：C语言 (基于寄存器直接操作，不依赖标准库)

## 四、硬件接线说明

| 外设模块 | 引脚连接 (STM32F103C8T6) | 接线细节 |
| :--- | :--- | :--- |
| **ULN2003驱动板** | IN1 → PA0<br>IN2 → PA1<br>IN3 → PA2<br>IN4 → PA3 | 驱动板的4个控制信号输入端，连接到STM32的GPIO输出口 |
| **28BYJ-48电机** | 线圈A/B/A-/B- → ULN2003 OUT1~OUT4<br>公共端(COM) → 5V电源 | 电机线圈必须通过驱动板驱动，公共端需接外部5V电源 |
| **轻触按键** | 一端 → PB7<br>另一端 → GND | 按键一端接PB7，另一端接地。代码中已启用STM32内部上拉电阻 |
| **电源** | 5V/1A | 为ULN2003驱动板和步进电机供电，务必与STM32共地(GND) |
| **ST-Link V2** | SWDIO, SWCLK, GND, 3.3V | 严格对应引脚连接，为单片机提供调试和烧录接口 |

**⚠️ 特别注意：**
- 电机和驱动板的电源必须与STM32的GND连接在一起（共地），否则无法通信。
- 28BYJ-48电机的公共端(通常是红色线)必须接到5V电源，而不是3.3V。

## 五、烧录与调试步骤
1. **硬件连接**：严格按照“硬件接线说明”连接所有设备。
2. **驱动安装**：在PC端安装ST-Link V2驱动，确保电脑能识别到设备。
3. **工程配置**：打开Keil MDK项目，进入"Project Options" -> "Debug"，选择"ST-Link Debugger"，并点击"Settings"确认SWDIO/SWCLK已正确连接。
4. **程序烧录**：编译工程(确保无错误)，点击工具栏"Download"按钮，将程序下载到STM32单片机。
5. **调试验证**：烧录完成后，按下复位键。按动按键，观察电机是否按预设逻辑每次转动90度，并在一周后自动换向。

## 六、使用说明
1. 再次检查所有硬件接线无误后，给整个系统通电。
2. 按下轻触按键，电机将转动90度。连续按键，电机将按以下顺序循环：
   - **正转循环**：`0° → 90° → 180° → 270° → 360°`
   - **反转循环**：`360° → 270° → 180° → 90° → 0°`
   - 完成反转循环后，系统将自动进入下一轮正转循环。

## 七、版本说明
- **当前版本**：V1.0 (基础功能版)
- **版本状态**：已实现核心功能（按键检测、步进电机精准角度控制、自动换向循环）。代码采用模块化设计，结构清晰，基于寄存器操作，运行效率高。
